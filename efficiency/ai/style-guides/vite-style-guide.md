---
outline: deep
editLink: false
---

# 官方风格指南摘录：优先级 A（必要，规避错误）与优先级 B（强烈推荐，增强可读性）

依据：
- Vite 官方指南：https://vitejs.dev/guide/

说明：本文档以 A/B 结构为主，将原有项目级约定融合为“项目强化（PJ）”条目，统一检查清单与工具映射。

---

## 优先级 A：必要（规避错误）

### A-1 配置集中与可维护性（PJ）
- 规则：所有构建与插件配置集中在 `vite.config.ts` 与 `build/**` 下，禁止在脚本或组件中硬编码构建逻辑。

### A-2 环境变量约定（PJ）
- 规则：环境变量统一使用 `import.meta.env.*`；仅以 `VITE_` 前缀在 `.env.*` 中声明，并在文档说明用途。
- 反例：在业务代码中读取 `.env` 文件或使用 `process.env`。

### A-3 构建策略变更留档（PJ）
- 规则：产物分包、CDN、压缩、legacy 支持等改动需走评审并记录到 `docs_1118/`（构建策略变更记录）。

### A-4 路径别名统一（PJ）
- 规则：别名在 `vite.config.ts` 维护，统一 `@` 指向 `src`；避免 `../../../` 相对路径地狱。

---

## 优先级 B：强烈推荐（增强可读性）

### B-1 插件最小化（通用实践）
- 规则：优先使用官方/成熟插件，避免功能重叠与对编译链过度侵入；按需启用、明确注释。

### B-2 自动导入一致性（PJ）
- 规则：使用 `unplugin-auto-import` / `unplugin-vue-components`，与项目约定保持一致。

### B-3 构建优化与压缩（通用实践）
- 规则：使用 `vite-plugin-compression`/`terser` 做产物压缩，保留必须注释（license）。

### B-4 分包与预构建（通用实践）
- 规则：合理配置 `build.rollupOptions` 的 `manualChunks` 与 `optimizeDeps`；高频依赖预构建以缩短冷启动。

### B-5 调试与分析（可选）
- 规则：在分析阶段引入 `rollup-plugin-visualizer` 观测体积；对慢模块记录构建耗时与缓存命中情况。

---

## 附录 A：统一检查清单（合并版）
- [ ] 新增环境变量是否以 `VITE_` 开头并文档化？
- [ ] 是否存在插件功能重叠或明显构建开销？
- [ ] 别名是否统一（如 `@` -> `src`）且无深层相对路径？
- [ ] 是否有分包/预构建与压缩策略说明？

## 附录 B：项目内示例
- `vite.config.ts` 与 `build/vite/**` 的插件组织与拆分。

## 官方链接
- Vite 官方指南：https://vitejs.dev/guide/
