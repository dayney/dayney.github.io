import{_ as s,c as a,o as i,V as n}from"./chunks/framework.CsbsVE7l.js";const e="/assets/images_001.YziQKIsg.png",l="/assets/images_002.BwHkRT6R.png",t="/assets/images_003.DQzvOE0n.png",p="/assets/images_004.DSIs2UUk.png",o="/assets/images_005.BFlF-Edy.png",h="/assets/images_006.CsLnQaIp.png",F=JSON.parse('{"title":"🚀 使用 Cursor 的 MCP 调用 Chrome - 完整配置和测试教程","description":"","frontmatter":{"outline":"deep","editLink":false},"headers":[],"relativePath":"efficiency/ai/ai.md","filePath":"efficiency/ai/ai.md","lastUpdated":1762338445000}'),r={name:"efficiency/ai/ai.md"},c=n('<h3 id="cursor-中mcp的使用" tabindex="-1">Cursor 中mcp的使用 <a class="header-anchor" href="#cursor-中mcp的使用" aria-label="Permalink to &quot;Cursor 中mcp的使用&quot;">​</a></h3><hr><h4 id="最终效果" tabindex="-1">最终效果： <a class="header-anchor" href="#最终效果" aria-label="Permalink to &quot;最终效果：&quot;">​</a></h4><p><img src="'+e+'" alt="images_001"></p><p><img src="'+l+'" alt="images_002"></p><p><img src="'+t+'" alt="images_003"></p><p><img src="'+p+`" alt="images_004"></p><h1 id="🚀-使用-cursor-的-mcp-调用-chrome-完整配置和测试教程" tabindex="-1">🚀 使用 Cursor 的 MCP 调用 Chrome - 完整配置和测试教程 <a class="header-anchor" href="#🚀-使用-cursor-的-mcp-调用-chrome-完整配置和测试教程" aria-label="Permalink to &quot;🚀 使用 Cursor 的 MCP 调用 Chrome - 完整配置和测试教程&quot;">​</a></h1><blockquote><p>本文档提供完整的 MCP (Model Context Protocol) 配置和测试教程，帮助你在 Cursor IDE 中使用 Chrome 浏览器自动化工具。</p></blockquote><h2 id="📋-目录" tabindex="-1">📋 目录 <a class="header-anchor" href="#📋-目录" aria-label="Permalink to &quot;📋 目录&quot;">​</a></h2><ol><li><a href="#前置条件检查">前置条件检查</a></li><li><a href="#安装-chrome-mcp-扩展">安装 Chrome MCP 扩展</a></li><li><a href="#安装-mcp-chrome-bridge">安装 mcp-chrome-bridge</a></li><li><a href="#配置-cursor-mcp">配置 Cursor MCP</a></li><li><a href="#注册-native-messaging-host">注册 Native Messaging Host</a></li><li><a href="#启动服务">启动服务</a></li><li><a href="#测试验证">测试验证</a></li><li><a href="#常见问题排查">常见问题排查</a></li><li><a href="#完整测试案例">完整测试案例</a></li></ol><hr><h2 id="前置条件检查" tabindex="-1">前置条件检查 <a class="header-anchor" href="#前置条件检查" aria-label="Permalink to &quot;前置条件检查&quot;">​</a></h2><p>在开始配置之前，请确保满足以下条件：</p><h3 id="✅-node-js-版本检查" tabindex="-1">✅ Node.js 版本检查 <a class="header-anchor" href="#✅-node-js-版本检查" aria-label="Permalink to &quot;✅ Node.js 版本检查&quot;">​</a></h3><p><strong>⚠️ 重要提示：Node.js 版本必须 &gt;= 18，否则虽然安装成功，但 server 无法启动！</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre></div><p><strong>要求</strong>: Node.js &gt;= 18.0.0</p><p><strong>示例输出</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>v22.16.0  ✅ 满足要求</span></span></code></pre></div><p>如果版本低于 18，请先升级 Node.js：</p><ul><li><a href="https://nodejs.org/" target="_blank" rel="noreferrer">Node.js 官网下载</a></li><li>或使用 nvm 管理多个版本：<code>nvm install 18</code></li></ul><h3 id="✅-chrome-浏览器已安装" tabindex="-1">✅ Chrome 浏览器已安装 <a class="header-anchor" href="#✅-chrome-浏览器已安装" aria-label="Permalink to &quot;✅ Chrome 浏览器已安装&quot;">​</a></h3><p>确保已安装 Google Chrome 浏览器。</p><h3 id="✅-包管理器选择" tabindex="-1">✅ 包管理器选择 <a class="header-anchor" href="#✅-包管理器选择" aria-label="Permalink to &quot;✅ 包管理器选择&quot;">​</a></h3><p>可以使用 <code>npm</code> 或 <code>pnpm</code> 安装，推荐使用 <code>pnpm</code>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 pnpm 是否已安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果未安装，全局安装 pnpm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm</span></span></code></pre></div><hr><h2 id="安装-chrome-mcp-扩展" tabindex="-1">安装 Chrome MCP 扩展 <a class="header-anchor" href="#安装-chrome-mcp-扩展" aria-label="Permalink to &quot;安装 Chrome MCP 扩展&quot;">​</a></h2><h3 id="步骤-1-下载-chrome-mcp-扩展" tabindex="-1">步骤 1: 下载 Chrome MCP 扩展 <a class="header-anchor" href="#步骤-1-下载-chrome-mcp-扩展" aria-label="Permalink to &quot;步骤 1: 下载 Chrome MCP 扩展&quot;">​</a></h3><ol><li>访问 GitHub 发布页面：<a href="https://github.com/hangwin/mcp-chrome/releases" target="_blank" rel="noreferrer">https://github.com/hangwin/mcp-chrome/releases</a></li><li>下载最新版本的扩展文件（通常是 <code>.zip</code> 或 <code>.crx</code> 文件）</li><li>解压文件到本地目录（如果是 <code>.zip</code> 文件）</li></ol><h3 id="步骤-2-安装扩展到-chrome" tabindex="-1">步骤 2: 安装扩展到 Chrome <a class="header-anchor" href="#步骤-2-安装扩展到-chrome" aria-label="Permalink to &quot;步骤 2: 安装扩展到 Chrome&quot;">​</a></h3><ol><li>打开 Chrome 浏览器</li><li>在地址栏输入：<code>chrome://extensions/</code></li><li>开启右上角的**&quot;开发者模式&quot;**开关</li><li>点击**&quot;加载已解压的扩展程序&quot;**按钮</li><li>选择刚才解压的扩展文件夹</li><li>确认扩展已成功安装</li></ol><h3 id="步骤-3-验证扩展安装" tabindex="-1">步骤 3: 验证扩展安装 <a class="header-anchor" href="#步骤-3-验证扩展安装" aria-label="Permalink to &quot;步骤 3: 验证扩展安装&quot;">​</a></h3><p>安装成功后，你应该能在扩展列表中看到 <strong>&quot;Chrome MCP Server&quot;</strong> 或 <strong>&quot;MCP Chrome&quot;</strong> 扩展。</p><p><strong>扩展 ID</strong>: <code>chrome-extension://hbdgbgagpkpjffpklnamcljpakneikee/</code></p><hr><h2 id="安装-mcp-chrome-bridge" tabindex="-1">安装 mcp-chrome-bridge <a class="header-anchor" href="#安装-mcp-chrome-bridge" aria-label="Permalink to &quot;安装 mcp-chrome-bridge&quot;">​</a></h2><h3 id="使用-pnpm-安装-推荐" tabindex="-1">使用 pnpm 安装（推荐） <a class="header-anchor" href="#使用-pnpm-安装-推荐" aria-label="Permalink to &quot;使用 pnpm 安装（推荐）&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mcp-chrome-bridge</span></span></code></pre></div><h3 id="或使用-npm-安装" tabindex="-1">或使用 npm 安装 <a class="header-anchor" href="#或使用-npm-安装" aria-label="Permalink to &quot;或使用 npm 安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mcp-chrome-bridge</span></span></code></pre></div><h3 id="验证安装" tabindex="-1">验证安装 <a class="header-anchor" href="#验证安装" aria-label="Permalink to &quot;验证安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查是否安装成功</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp-chrome-bridge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查可执行文件路径</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mcp-chrome-bridge</span></span></code></pre></div><p><strong>预期输出</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>1.0.29</span></span>
<span class="line"><span>/Users/your-username/Library/pnpm/mcp-chrome-bridge</span></span></code></pre></div><hr><h2 id="配置-cursor-mcp" tabindex="-1">配置 Cursor MCP <a class="header-anchor" href="#配置-cursor-mcp" aria-label="Permalink to &quot;配置 Cursor MCP&quot;">​</a></h2><h3 id="⚠️-重要-配置格式错误导致失败" tabindex="-1">⚠️ 重要：配置格式错误导致失败 <a class="header-anchor" href="#⚠️-重要-配置格式错误导致失败" aria-label="Permalink to &quot;⚠️ 重要：配置格式错误导致失败&quot;">​</a></h3><p><strong>常见错误配置</strong>（❌ 不要使用这种方式）：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;chrome-browser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chrome-mcp-server@0.0.6&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>这种配置方式会导致连接失败！</strong></p><h3 id="✅-正确配置方式" tabindex="-1">✅ 正确配置方式 <a class="header-anchor" href="#✅-正确配置方式" aria-label="Permalink to &quot;✅ 正确配置方式&quot;">​</a></h3><p>在项目根目录或用户配置目录创建或编辑 <code>.cursor/mcp.json</code> 文件：</p><p><strong>项目级配置</strong>（推荐）: <code>.cursor/mcp.json</code></p><p><strong>全局配置</strong>: <code>~/.cursor/mcp.json</code></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;chrome-browser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;streamable-http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:12306/mcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>⚠️ 关键点</strong>：</p><ul><li>必须使用 <code>&quot;type&quot;: &quot;streamable-http&quot;</code> 类型</li><li><code>url</code> 中的端口 <code>12306</code> 必须与 Chrome 扩展中设置的端口一致</li><li>不要使用 <code>command</code> + <code>args</code> 的方式</li></ul><h3 id="配置说明" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><table><thead><tr><th>配置项</th><th>说明</th><th>示例值</th></tr></thead><tbody><tr><td><code>type</code></td><td>服务类型，必须为 <code>streamable-http</code></td><td><code>&quot;streamable-http&quot;</code></td></tr><tr><td><code>url</code></td><td>MCP 服务地址</td><td><code>&quot;http://localhost:12306/mcp&quot;</code></td></tr><tr><td>端口</td><td>与 Chrome 扩展中的端口设置一致</td><td><code>12306</code></td></tr></tbody></table><hr><h2 id="注册-native-messaging-host" tabindex="-1">注册 Native Messaging Host <a class="header-anchor" href="#注册-native-messaging-host" aria-label="Permalink to &quot;注册 Native Messaging Host&quot;">​</a></h2><h3 id="🤔-为什么需要这一步" tabindex="-1">🤔 为什么需要这一步？ <a class="header-anchor" href="#🤔-为什么需要这一步" aria-label="Permalink to &quot;🤔 为什么需要这一步？&quot;">​</a></h3><p><strong>Native Messaging 是 Chrome 的安全机制</strong>，用于允许扩展与本地应用程序进行安全的双向通信。</p><h4 id="_1-安全隔离机制" tabindex="-1">1. 安全隔离机制 <a class="header-anchor" href="#_1-安全隔离机制" aria-label="Permalink to &quot;1. 安全隔离机制&quot;">​</a></h4><p>Chrome 扩展运行在沙箱环境中，出于安全考虑，<strong>不能直接访问本地文件系统或执行本地程序</strong>。但是，MCP Chrome Bridge 需要：</p><ul><li>启动本地的 Node.js 服务（<code>mcp-chrome-bridge</code>）</li><li>与本地服务进行双向通信（发送命令、接收响应）</li><li>控制 Chrome 浏览器（打开页面、点击元素等）</li></ul><p><strong>Native Messaging 就是 Chrome 提供的安全桥梁</strong>，让扩展可以安全地与本地应用程序通信。</p><h4 id="_2-工作原理" tabindex="-1">2. 工作原理 <a class="header-anchor" href="#_2-工作原理" aria-label="Permalink to &quot;2. 工作原理&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Chrome 扩展 (浏览器内)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Native Messaging API (Chrome 内置)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Native Messaging Host (必须注册)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>本地程序 (mcp-chrome-bridge)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>HTTP 服务 (localhost:12306)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Cursor MCP (通过 HTTP 连接)</span></span></code></pre></div><p><strong>没有注册 Native Messaging Host 会怎样？</strong></p><ul><li>Chrome 扩展无法找到本地服务程序</li><li>扩展调用 <code>chrome.runtime.connectNative()</code> 会失败</li><li>显示&quot;服务未连接&quot;错误</li><li>无法建立 Chrome ↔ 本地服务的通信通道</li></ul><h4 id="_3-注册的作用" tabindex="-1">3. 注册的作用 <a class="header-anchor" href="#_3-注册的作用" aria-label="Permalink to &quot;3. 注册的作用&quot;">​</a></h4><p>注册 Native Messaging Host 实际上是告诉 Chrome：</p><ul><li><strong>本地程序的路径</strong>：在哪里找到 <code>mcp-chrome-bridge</code> 程序</li><li><strong>允许的扩展 ID</strong>：哪些扩展可以连接这个本地服务（白名单机制）</li><li><strong>通信方式</strong>：使用 <code>stdio</code>（标准输入输出）进行通信</li></ul><p><strong>配置文件示例</strong>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.chromemcp.nativehost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Node.js Host for Browser Bridge Extension&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/Users/krui/Library/pnpm/global/5/node_modules/mcp-chrome-bridge/dist/run_host.sh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stdio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;allowed_origins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;chrome-extension://hbdgbgagpkpjffpklnamcljpakneikee/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>配置文件的作用</strong>：</p><ul><li><code>name</code>: 唯一标识符，Chrome 用它来查找这个 host</li><li><code>path</code>: 本地程序的完整路径，Chrome 会启动这个程序</li><li><code>allowed_origins</code>: 白名单，只有这个扩展 ID 可以连接</li><li><code>type: &quot;stdio&quot;</code>: 使用标准输入输出进行通信</li></ul><h4 id="_4-为什么不能跳过这一步" tabindex="-1">4. 为什么不能跳过这一步？ <a class="header-anchor" href="#_4-为什么不能跳过这一步" aria-label="Permalink to &quot;4. 为什么不能跳过这一步？&quot;">​</a></h4><p><strong>如果跳过注册步骤</strong>：</p><ol><li>Chrome 扩展尝试连接本地服务时，Chrome 会查找 Native Messaging Host</li><li>Chrome 在系统配置目录中找不到对应的配置文件</li><li><code>chrome.runtime.connectNative()</code> 调用失败，返回错误</li><li>扩展显示&quot;服务未连接&quot;</li><li>整个通信链路中断</li></ol><p><strong>只有注册后</strong>：</p><ol><li>Chrome 知道要启动哪个本地程序</li><li>Chrome 知道允许哪个扩展连接</li><li>Chrome 启动本地程序（<code>run_host.sh</code>）</li><li>建立双向通信通道</li><li>扩展可以发送命令，本地程序可以响应</li></ol><h3 id="⚠️-常见问题-服务未连接" tabindex="-1">⚠️ 常见问题：服务未连接 <a class="header-anchor" href="#⚠️-常见问题-服务未连接" aria-label="Permalink to &quot;⚠️ 常见问题：服务未连接&quot;">​</a></h3><p><strong>问题现象</strong>：</p><ul><li>Chrome 扩展界面显示&quot;服务未连接&quot;（红色状态）</li><li>状态指示器显示&quot;服务未连接&quot;</li></ul><p><strong>根本原因</strong>：</p><ul><li>Native Messaging host 未注册到 Chrome</li><li>Chrome 无法找到本地服务程序</li><li>Chrome 无法建立扩展与本地服务的通信通道</li></ul><h3 id="解决步骤-注册-native-messaging-host" tabindex="-1">解决步骤：注册 Native Messaging Host <a class="header-anchor" href="#解决步骤-注册-native-messaging-host" aria-label="Permalink to &quot;解决步骤：注册 Native Messaging Host&quot;">​</a></h3><p>运行以下命令注册 Native Messaging host：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp-chrome-bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> register</span></span></code></pre></div><h3 id="注册过程说明" tabindex="-1">注册过程说明 <a class="header-anchor" href="#注册过程说明" aria-label="Permalink to &quot;注册过程说明&quot;">​</a></h3><p>注册命令会执行以下操作：</p><ol><li><p><strong>设置 Node.js 路径</strong></p><ul><li>自动检测 Node.js 安装路径</li><li>写入到 <code>run_host.sh</code> 脚本中</li></ul></li><li><p><strong>设置执行权限</strong></p><ul><li>为 <code>index.js</code>、<code>run_host.sh</code>、<code>cli.js</code> 设置执行权限</li></ul></li><li><p><strong>创建 Native Messaging 配置文件</strong></p><ul><li>配置文件位置（macOS）:<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>~/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.chromemcp.nativehost.json</span></span></code></pre></div></li><li>配置文件位置（Linux）:<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>~/.config/google-chrome/NativeMessagingHosts/com.chromemcp.nativehost.json</span></span></code></pre></div></li><li>配置文件位置（Windows）:<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>%LOCALAPPDATA%\\Google\\Chrome\\User Data\\NativeMessagingHosts\\com.chromemcp.nativehost.json</span></span></code></pre></div></li></ul></li><li><p><strong>配置扩展 ID</strong></p><ul><li>自动配置允许的扩展 ID: <code>chrome-extension://hbdgbgagpkpjffpklnamcljpakneikee/</code></li></ul></li></ol><h3 id="验证注册结果" tabindex="-1">验证注册结果 <a class="header-anchor" href="#验证注册结果" aria-label="Permalink to &quot;验证注册结果&quot;">​</a></h3><p>检查 Native Messaging 配置文件：</p><p><strong>macOS/Linux</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/Library/Application</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Support/Google/Chrome/NativeMessagingHosts/com.chromemcp.nativehost.json</span></span></code></pre></div><p><strong>Windows</strong>:</p><div class="language-cmd vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LOCALAPPDATA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\\Google\\Chrome\\User Data\\NativeMessagingHosts\\com.chromemcp.nativehost.json</span></span></code></pre></div><p><strong>预期输出</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.chromemcp.nativehost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Node.js Host for Browser Bridge Extension&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/Users/your-username/Library/pnpm/global/5/node_modules/mcp-chrome-bridge/dist/run_host.sh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stdio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;allowed_origins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;chrome-extension://hbdgbgagpkpjffpklnamcljpakneikee/&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="启动服务" tabindex="-1">启动服务 <a class="header-anchor" href="#启动服务" aria-label="Permalink to &quot;启动服务&quot;">​</a></h2><h3 id="步骤-1-在-chrome-扩展中启动服务" tabindex="-1">步骤 1: 在 Chrome 扩展中启动服务 <a class="header-anchor" href="#步骤-1-在-chrome-扩展中启动服务" aria-label="Permalink to &quot;步骤 1: 在 Chrome 扩展中启动服务&quot;">​</a></h3><ol><li><p><strong>打开 Chrome 浏览器</strong></p><ul><li>确保 Chrome 浏览器已打开</li></ul></li><li><p><strong>找到 Chrome MCP Server 扩展</strong></p><ul><li>方式 1: 点击地址栏右侧的扩展图标（拼图图标），找到扩展</li><li>方式 2: 在地址栏输入 <code>chrome://extensions/</code> 打开扩展管理页面</li></ul></li><li><p><strong>打开扩展设置界面</strong></p><ul><li>点击扩展图标</li><li>或点击扩展详情页面的&quot;选项&quot;/&quot;设置&quot;按钮</li></ul></li><li><p><strong>配置端口</strong></p><ul><li>在扩展设置界面中，确认端口设置为 <strong>12306</strong></li><li>端口必须与 Cursor MCP 配置中的端口一致</li></ul></li><li><p><strong>启动服务</strong></p><ul><li>点击&quot;连接&quot;或&quot;启动&quot;按钮（通常是一个带有闪电图标的紫色按钮）</li><li>等待状态变为&quot;服务已连接&quot;或&quot;服务已启动&quot;</li><li>状态指示器应该变为绿色（🟢）</li></ul></li></ol><h3 id="⚠️-常见问题-点击连接后仍然显示-服务未连接" tabindex="-1">⚠️ 常见问题：点击连接后仍然显示&quot;服务未连接&quot; <a class="header-anchor" href="#⚠️-常见问题-点击连接后仍然显示-服务未连接" aria-label="Permalink to &quot;⚠️ 常见问题：点击连接后仍然显示&quot;服务未连接&quot;&quot;">​</a></h3><p><strong>可能原因</strong>：</p><ol><li>Native Messaging host 未正确注册</li><li>Node.js 路径不正确</li><li>Chrome 扩展 ID 不匹配</li><li>Node.js 版本低于 18</li></ol><p><strong>解决方案</strong>：</p><ol><li>重新运行注册命令：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp-chrome-bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> register</span></span></code></pre></div></li><li>检查 Node.js 版本：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre></div></li><li>重启 Chrome 浏览器</li><li>重新点击扩展中的&quot;连接&quot;按钮</li></ol><h3 id="步骤-2-验证服务状态" tabindex="-1">步骤 2: 验证服务状态 <a class="header-anchor" href="#步骤-2-验证服务状态" aria-label="Permalink to &quot;步骤 2: 验证服务状态&quot;">​</a></h3><h4 id="方法-1-检查端口占用" tabindex="-1">方法 1: 检查端口占用 <a class="header-anchor" href="#方法-1-检查端口占用" aria-label="Permalink to &quot;方法 1: 检查端口占用&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :12306</span></span></code></pre></div><p><strong>预期输出</strong>（如果服务已启动）:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME</span></span>
<span class="line"><span>node    65033 krui   17u  IPv4 0x944777a9d342e528      0t0  TCP localhost:12306 (LISTEN)</span></span></code></pre></div><p><strong>如果端口未被占用</strong>，说明服务未启动，需要回到步骤 1。</p><h4 id="方法-2-测试服务连接" tabindex="-1">方法 2: 测试服务连接 <a class="header-anchor" href="#方法-2-测试服务连接" aria-label="Permalink to &quot;方法 2: 测试服务连接&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:12306/mcp</span></span></code></pre></div><p><strong>预期输出</strong>（如果服务已启动）:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>{&quot;error&quot;:&quot;Invalid or missing MCP session ID for SSE.&quot;}</span></span></code></pre></div><p>这个错误是正常的，说明服务正在运行，只是缺少会话 ID。</p><h3 id="步骤-3-重启-cursor" tabindex="-1">步骤 3: 重启 Cursor <a class="header-anchor" href="#步骤-3-重启-cursor" aria-label="Permalink to &quot;步骤 3: 重启 Cursor&quot;">​</a></h3><ol><li><p><strong>完全退出 Cursor</strong></p><ul><li>macOS: 按 <code>Cmd + Q</code> 完全退出应用</li><li>Windows: 按 <code>Alt + F4</code> 或右键任务栏图标选择退出</li><li>Linux: 关闭所有 Cursor 窗口</li></ul></li><li><p><strong>重新打开 Cursor</strong></p><ul><li>打开 Cursor IDE</li><li>等待 MCP 服务连接 <img src="`+o+'" alt="images_005"></li></ul></li><li><p><strong>验证 MCP 连接</strong></p><ul><li><p>在 Cursor 设置中查看 MCP 服务状态</p></li><li><p>应该显示&quot;已连接，服务已启动&quot;</p></li><li><p><code>chrome-browser</code> 服务应该显示为绿色（🟢） <img src="'+h+`" alt="images_006"></p></li></ul></li></ol><hr><h2 id="测试验证" tabindex="-1">测试验证 <a class="header-anchor" href="#测试验证" aria-label="Permalink to &quot;测试验证&quot;">​</a></h2><h3 id="使用配置检查脚本" tabindex="-1">使用配置检查脚本 <a class="header-anchor" href="#使用配置检查脚本" aria-label="Permalink to &quot;使用配置检查脚本&quot;">​</a></h3><p>项目提供了配置检查脚本，可以自动检查所有配置项：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test-chrome-mcp-config.js</span></span></code></pre></div><p><strong>脚本检查项</strong>：</p><ul><li>✅ Node.js 版本（&gt;= 18）</li><li>✅ mcp-chrome-bridge 安装</li><li>✅ Native Messaging 注册</li><li>⚠️ 端口服务状态（需要在 Chrome 扩展中启动）</li><li>✅ Cursor MCP 配置</li></ul><p><strong>预期输出</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>🔍 开始检查 Chrome MCP 配置...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>✅ Node.js 版本: v22.16.0 (&gt;= 18)</span></span>
<span class="line"><span>✅ mcp-chrome-bridge 已安装: 1.0.29 (/Users/krui/Library/pnpm/mcp-chrome-bridge)</span></span>
<span class="line"><span>✅ Native Messaging 已注册: /Users/krui/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.chromemcp.nativehost.json</span></span>
<span class="line"><span>   扩展 ID: chrome-extension://hbdgbgagpkpjffpklnamcljpakneikee/</span></span>
<span class="line"><span>⚠️  端口 12306 未被占用（需要在 Chrome 扩展中启动服务）</span></span>
<span class="line"><span>✅ Cursor MCP 配置正确</span></span>
<span class="line"><span>   类型: streamable-http</span></span>
<span class="line"><span>   URL: http://localhost:12306/mcp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>📊 检查结果总结:</span></span>
<span class="line"><span>──────────────────────────────────────────────────</span></span>
<span class="line"><span>✅ Node.js 版本</span></span>
<span class="line"><span>✅ mcp-chrome-bridge 安装</span></span>
<span class="line"><span>✅ Native Messaging 注册</span></span>
<span class="line"><span>❌ 端口服务状态</span></span>
<span class="line"><span>✅ Cursor MCP 配置</span></span>
<span class="line"><span>──────────────────────────────────────────────────</span></span>
<span class="line"><span>通过: 4/5</span></span>
<span class="line"><span></span></span>
<span class="line"><span>⚠️  部分检查未通过，请根据上述提示修复问题。</span></span></code></pre></div><h3 id="手动验证步骤" tabindex="-1">手动验证步骤 <a class="header-anchor" href="#手动验证步骤" aria-label="Permalink to &quot;手动验证步骤&quot;">​</a></h3><ol><li><p><strong>检查 Chrome 扩展状态</strong></p><ul><li>打开 <code>chrome://extensions/</code></li><li>确认扩展已启用</li><li>点击扩展图标，查看状态是否为&quot;服务已连接&quot;</li></ul></li><li><p><strong>检查 Cursor MCP 状态</strong></p><ul><li>打开 Cursor 设置</li><li>查看 MCP 服务列表</li><li>确认 <code>chrome-browser</code> 服务已连接</li></ul></li><li><p><strong>测试基本功能</strong></p><ul><li>在 Cursor 的 Agent 模式下输入简单测试指令</li><li>查看是否能正常执行</li></ul></li></ol><hr><h2 id="常见问题排查" tabindex="-1">常见问题排查 <a class="header-anchor" href="#常见问题排查" aria-label="Permalink to &quot;常见问题排查&quot;">​</a></h2><h3 id="❌-问题-1-浏览器插件显示-服务未连接" tabindex="-1">❌ 问题 1: 浏览器插件显示&quot;服务未连接&quot; <a class="header-anchor" href="#❌-问题-1-浏览器插件显示-服务未连接" aria-label="Permalink to &quot;❌ 问题 1: 浏览器插件显示&quot;服务未连接&quot;&quot;">​</a></h3><p><strong>问题现象</strong>：</p><ul><li>Chrome 扩展界面显示红色状态：&quot;服务未连接&quot;</li><li>状态指示器显示&quot;服务未连接&quot;</li></ul><p><strong>可能原因</strong>：</p><ol><li>Native Messaging host 未注册</li><li>Node.js 版本低于 18</li><li>Node.js 路径不正确</li><li>Chrome 扩展 ID 不匹配</li></ol><p><strong>解决方案</strong>：</p><p><strong>步骤 1</strong>: 检查 Node.js 版本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre></div><p>确保版本 &gt;= 18</p><p><strong>步骤 2</strong>: 重新注册 Native Messaging host</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp-chrome-bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> register</span></span></code></pre></div><p><strong>步骤 3</strong>: 验证注册结果</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/Library/Application</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Support/Google/Chrome/NativeMessagingHosts/com.chromemcp.nativehost.json</span></span></code></pre></div><p><strong>步骤 4</strong>: 检查扩展 ID 是否匹配</p><ul><li>扩展 ID 应该是: <code>chrome-extension://hbdgbgagpkpjffpklnamcljpakneikee/</code></li><li>如果配置文件中的 ID 不匹配，需要重新注册</li></ul><p><strong>步骤 5</strong>: 重启 Chrome 浏览器</p><ul><li>完全关闭 Chrome 浏览器</li><li>重新打开 Chrome</li><li>再次点击扩展中的&quot;连接&quot;按钮</li></ul><hr><h3 id="❌-问题-2-cursor-mcp-配置格式错误" tabindex="-1">❌ 问题 2: Cursor MCP 配置格式错误 <a class="header-anchor" href="#❌-问题-2-cursor-mcp-配置格式错误" aria-label="Permalink to &quot;❌ 问题 2: Cursor MCP 配置格式错误&quot;">​</a></h3><p><strong>问题现象</strong>：</p><ul><li>Cursor 中显示 MCP 服务连接失败</li><li>无法使用 Chrome MCP 工具</li></ul><p><strong>错误配置示例</strong>（❌ 不要使用）：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;chrome-browser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chrome-mcp-server@0.0.6&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>正确配置方式</strong>（✅ 必须使用）：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;chrome-browser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;streamable-http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:12306/mcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>关键区别</strong>：</p><ul><li>❌ 错误方式：使用 <code>command</code> + <code>args</code> 直接运行 npm 包</li><li>✅ 正确方式：使用 <code>type: &quot;streamable-http&quot;</code> 连接本地 HTTP 服务</li></ul><p><strong>修复步骤</strong>：</p><ol><li>打开 <code>.cursor/mcp.json</code> 文件</li><li>将配置改为正确的 <code>streamable-http</code> 格式</li><li>确保端口 <code>12306</code> 与 Chrome 扩展中的端口一致</li><li>保存文件</li><li>重启 Cursor</li></ol><hr><h3 id="❌-问题-3-cursor-显示-已连接-服务未启动" tabindex="-1">❌ 问题 3: Cursor 显示&quot;已连接，服务未启动&quot; <a class="header-anchor" href="#❌-问题-3-cursor-显示-已连接-服务未启动" aria-label="Permalink to &quot;❌ 问题 3: Cursor 显示&quot;已连接，服务未启动&quot;&quot;">​</a></h3><p><strong>问题现象</strong>：</p><ul><li>Cursor 中显示 MCP 服务已连接</li><li>但状态显示&quot;服务未启动&quot;</li><li>无法执行浏览器操作</li></ul><p><strong>可能原因</strong>：</p><ul><li>Chrome 扩展中的服务未启动</li><li>端口 12306 未被占用</li></ul><p><strong>解决方案</strong>：</p><p><strong>步骤 1</strong>: 检查端口状态</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :12306</span></span></code></pre></div><p><strong>步骤 2</strong>: 在 Chrome 扩展中启动服务</p><ol><li>打开 Chrome 扩展设置界面</li><li>点击&quot;连接&quot;或&quot;启动&quot;按钮</li><li>等待状态变为&quot;服务已连接&quot;（绿色）</li></ol><p><strong>步骤 3</strong>: 验证服务状态</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:12306/mcp</span></span></code></pre></div><p>如果返回错误信息（这是正常的），说明服务已启动。</p><p><strong>步骤 4</strong>: 刷新 Cursor MCP 状态</p><ul><li>在 Cursor 设置中刷新 MCP 服务状态</li><li>或重启 Cursor</li></ul><hr><h3 id="❌-问题-4-端口-12306-被占用" tabindex="-1">❌ 问题 4: 端口 12306 被占用 <a class="header-anchor" href="#❌-问题-4-端口-12306-被占用" aria-label="Permalink to &quot;❌ 问题 4: 端口 12306 被占用&quot;">​</a></h3><p><strong>问题现象</strong>：</p><ul><li>无法启动服务</li><li>提示端口被占用</li></ul><p><strong>检查端口占用</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :12306</span></span></code></pre></div><p><strong>解决方案</strong>：</p><p><strong>方案 1</strong>: 关闭占用端口的进程</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查找占用端口的进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :12306</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 终止进程（替换 PID 为实际进程 ID）</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">kill</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -9</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p><strong>方案 2</strong>: 更改端口（推荐）</p><ol><li>在 Chrome 扩展中更改端口（如 12307）</li><li>同时更新 Cursor 配置中的端口：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;chrome-browser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;streamable-http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:12307/mcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li>重启 Cursor</li></ol><hr><h3 id="❌-问题-5-node-js-版本问题" tabindex="-1">❌ 问题 5: Node.js 版本问题 <a class="header-anchor" href="#❌-问题-5-node-js-版本问题" aria-label="Permalink to &quot;❌ 问题 5: Node.js 版本问题&quot;">​</a></h3><p><strong>问题现象</strong>：</p><ul><li>安装成功但服务无法启动</li><li>提示 Node.js 版本错误</li></ul><p><strong>检查版本</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre></div><p><strong>要求</strong>: Node.js &gt;= 18.0.0</p><p><strong>解决方案</strong>：</p><ol><li>如果版本低于 18，需要升级 Node.js</li><li>使用 nvm 管理多个版本（推荐）：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 18</span></span></code></pre></div></li><li>重新注册 Native Messaging host：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp-chrome-bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> register</span></span></code></pre></div></li><li>重启 Chrome 浏览器</li></ol><hr><h3 id="❌-问题-6-无法执行浏览器操作" tabindex="-1">❌ 问题 6: 无法执行浏览器操作 <a class="header-anchor" href="#❌-问题-6-无法执行浏览器操作" aria-label="Permalink to &quot;❌ 问题 6: 无法执行浏览器操作&quot;">​</a></h3><p><strong>问题现象</strong>：</p><ul><li>服务已连接</li><li>但无法打开网页或执行操作</li></ul><p><strong>可能原因</strong>：</p><ol><li>Chrome 浏览器未正确安装</li><li>Chrome 路径配置错误</li><li>权限问题</li></ol><p><strong>解决方案</strong>：</p><ol><li>确认 Chrome 浏览器已正确安装</li><li>尝试手动启动 Chrome 浏览器验证</li><li>检查系统权限设置（macOS 可能需要授予辅助功能权限）</li></ol><hr><h2 id="完整测试案例" tabindex="-1">完整测试案例 <a class="header-anchor" href="#完整测试案例" aria-label="Permalink to &quot;完整测试案例&quot;">​</a></h2><h3 id="测试案例-1-基础搜索功能" tabindex="-1">测试案例 1: 基础搜索功能 <a class="header-anchor" href="#测试案例-1-基础搜索功能" aria-label="Permalink to &quot;测试案例 1: 基础搜索功能&quot;">​</a></h3><p>在 Cursor 的 Agent 模式下输入以下指令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>使用 MCP 浏览器工具：</span></span>
<span class="line"><span>1. 打开 Chrome 访问 https://www.baidu.com</span></span>
<span class="line"><span>2. 在搜索框输入&quot;淘宝&quot;并提交搜索</span></span>
<span class="line"><span>3. 点击搜索结果中的第一个网站</span></span></code></pre></div><p><strong>预期行为</strong>：</p><ol><li>Chrome 浏览器自动打开并导航到百度首页</li><li>自动在搜索框输入&quot;淘宝&quot;</li><li>自动提交搜索</li><li>自动点击第一个搜索结果</li><li>跳转到淘宝网站</li></ol><hr><h3 id="测试案例-2-网站内搜索" tabindex="-1">测试案例 2: 网站内搜索 <a class="header-anchor" href="#测试案例-2-网站内搜索" aria-label="Permalink to &quot;测试案例 2: 网站内搜索&quot;">​</a></h3><p>在 Cursor 的 Agent 模式下输入以下指令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>使用 MCP 浏览器工具：</span></span>
<span class="line"><span>1. 打开 Chrome 访问 https://www.baidu.com</span></span>
<span class="line"><span>2. 在搜索框输入&quot;淘宝&quot;并提交搜索</span></span>
<span class="line"><span>3. 点击搜索结果中的第一个网站</span></span>
<span class="line"><span>4. 在网站搜索栏输入&quot;外国山海经&quot;并提交搜索</span></span></code></pre></div><p><strong>预期行为</strong>：</p><ol><li>完成测试案例 1 的所有步骤</li><li>在淘宝网站搜索框中输入&quot;外国山海经&quot;</li><li>提交搜索</li><li>显示搜索结果</li></ol><hr><h3 id="测试案例-3-获取页面信息" tabindex="-1">测试案例 3: 获取页面信息 <a class="header-anchor" href="#测试案例-3-获取页面信息" aria-label="Permalink to &quot;测试案例 3: 获取页面信息&quot;">​</a></h3><p>在 Cursor 的 Agent 模式下输入以下指令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>使用 Chrome MCP 工具打开 https://dayney.github.io/ 并找出文章的作者</span></span></code></pre></div><p><strong>预期行为</strong>：</p><ol><li>Chrome 浏览器自动打开并导航到指定网站</li><li>获取页面内容</li><li>识别并返回文章作者信息</li></ol><hr><h2 id="📊-配置检查清单" tabindex="-1">📊 配置检查清单 <a class="header-anchor" href="#📊-配置检查清单" aria-label="Permalink to &quot;📊 配置检查清单&quot;">​</a></h2><p>在配置完成后，请检查以下项目：</p><ul><li>[ ] Node.js 版本 &gt;= 18</li><li>[ ] Chrome 浏览器已安装</li><li>[ ] Chrome MCP 扩展已安装</li><li>[ ] mcp-chrome-bridge 已全局安装</li><li>[ ] Native Messaging host 已注册</li><li>[ ] Cursor MCP 配置正确（使用 <code>streamable-http</code> 类型）</li><li>[ ] 端口 12306 已正确配置（扩展和 Cursor 一致）</li><li>[ ] Chrome 扩展服务已启动（绿色状态）</li><li>[ ] Cursor MCP 服务已连接</li><li>[ ] 测试案例执行成功</li></ul><hr><h2 id="🎯-快速参考" tabindex="-1">🎯 快速参考 <a class="header-anchor" href="#🎯-快速参考" aria-label="Permalink to &quot;🎯 快速参考&quot;">​</a></h2><h3 id="安装命令" tabindex="-1">安装命令 <a class="header-anchor" href="#安装命令" aria-label="Permalink to &quot;安装命令&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装 mcp-chrome-bridge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mcp-chrome-bridge</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 注册 Native Messaging host</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp-chrome-bridge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> register</span></span></code></pre></div><h3 id="配置文件位置" tabindex="-1">配置文件位置 <a class="header-anchor" href="#配置文件位置" aria-label="Permalink to &quot;配置文件位置&quot;">​</a></h3><p><strong>Cursor MCP 配置</strong>:</p><ul><li>项目级: <code>.cursor/mcp.json</code></li><li>全局: <code>~/.cursor/mcp.json</code></li></ul><p><strong>Native Messaging 配置</strong>:</p><ul><li>macOS: <code>~/Library/Application Support/Google/Chrome/NativeMessagingHosts/com.chromemcp.nativehost.json</code></li><li>Linux: <code>~/.config/google-chrome/NativeMessagingHosts/com.chromemcp.nativehost.json</code></li><li>Windows: <code>%LOCALAPPDATA%\\Google\\Chrome\\User Data\\NativeMessagingHosts\\com.chromemcp.nativehost.json</code></li></ul><h3 id="验证命令" tabindex="-1">验证命令 <a class="header-anchor" href="#验证命令" aria-label="Permalink to &quot;验证命令&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 Node.js 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查 mcp-chrome-bridge 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp-chrome-bridge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查端口占用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :12306</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 测试服务连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:12306/mcp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行配置检查脚本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/test-chrome-mcp-config.js</span></span></code></pre></div><hr><h2 id="📚-相关资源" tabindex="-1">📚 相关资源 <a class="header-anchor" href="#📚-相关资源" aria-label="Permalink to &quot;📚 相关资源&quot;">​</a></h2><ul><li><a href="https://www.cnblogs.com/charkey/p/19027812" target="_blank" rel="noreferrer">博客园教程</a> - 参考教程</li><li><a href="https://github.com/hangwin/mcp-chrome/releases" target="_blank" rel="noreferrer">GitHub 仓库</a> - Chrome MCP 扩展下载</li><li><a href="https://www.npmjs.com/package/mcp-chrome-bridge" target="_blank" rel="noreferrer">MCP Chrome Bridge npm 包</a> - npm 包信息</li><li><a href="https://docs.cursor.com/mcp" target="_blank" rel="noreferrer">Cursor MCP 文档</a> - Cursor 官方文档</li></ul><hr><h2 id="💡-经验总结" tabindex="-1">💡 经验总结 <a class="header-anchor" href="#💡-经验总结" aria-label="Permalink to &quot;💡 经验总结&quot;">​</a></h2><h3 id="✅-成功配置的关键点" tabindex="-1">✅ 成功配置的关键点 <a class="header-anchor" href="#✅-成功配置的关键点" aria-label="Permalink to &quot;✅ 成功配置的关键点&quot;">​</a></h3><ol><li><strong>Node.js 版本必须 &gt;= 18</strong>：这是最重要的前提条件</li><li><strong>使用正确的配置格式</strong>：必须使用 <code>streamable-http</code> 类型，不要使用 <code>command</code> + <code>args</code></li><li><strong>注册 Native Messaging host</strong>：这是连接 Chrome 扩展和本地服务的关键步骤</li><li><strong>端口配置一致</strong>：Chrome 扩展和 Cursor 配置中的端口必须完全一致</li><li><strong>按顺序执行</strong>：先注册 Native Messaging，再启动扩展服务，最后重启 Cursor</li></ol><h3 id="❌-常见失败原因" tabindex="-1">❌ 常见失败原因 <a class="header-anchor" href="#❌-常见失败原因" aria-label="Permalink to &quot;❌ 常见失败原因&quot;">​</a></h3><ol><li><strong>Node.js 版本过低</strong>：虽然安装成功，但服务无法启动</li><li><strong>配置格式错误</strong>：使用了错误的配置方式（<code>command</code> + <code>args</code>）</li><li><strong>未注册 Native Messaging host</strong>：导致 Chrome 扩展无法连接本地服务</li><li><strong>端口不一致</strong>：扩展和 Cursor 配置中的端口不匹配</li><li><strong>服务未启动</strong>：虽然配置正确，但忘记在 Chrome 扩展中启动服务</li></ol><hr><h2 id="🔄-更新日志" tabindex="-1">🔄 更新日志 <a class="header-anchor" href="#🔄-更新日志" aria-label="Permalink to &quot;🔄 更新日志&quot;">​</a></h2><ul><li><strong>2025-01-27</strong>: 创建完整配置和测试教程 <ul><li>添加前置条件检查</li><li>详细说明安装步骤</li><li>重点标记常见问题</li><li>添加完整测试案例</li><li>提供配置检查清单</li></ul></li></ul><p><strong>参考文档</strong>: <a href="https://www.cnblogs.com/charkey/p/19027812" target="_blank" rel="noreferrer">https://www.cnblogs.com/charkey/p/19027812</a></p>`,259),d=[c];function k(g,u,m,C,b,E){return i(),a("div",null,d)}const q=s(r,[["render",k]]);export{F as __pageData,q as default};
